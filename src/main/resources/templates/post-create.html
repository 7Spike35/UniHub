<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发帖 - 讨论区</title>
    <link rel="stylesheet" href="/css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-graduation-cap"></i>
                <span>UniHub</span>
            </div>
            <div class="nav-menu">
                <a href="/dashboard" class="nav-link"><i class="fas fa-home"></i> 首页</a>
                <a href="/forum" class="nav-link"><i class="fas fa-comments"></i> 讨论区</a>
            </div>
        </div>
    </nav>
    <main class="main-content">
        <div id="post-create-app" class="centered-container">
            <div class="card" style="max-width: 600px; margin: 40px auto;">
                <div class="card-header">
                    <h2><i class="fas fa-pen"></i> 发布新帖子</h2>
                </div>
                <div class="card-body">
                    <form @submit.prevent="submitPost" enctype="multipart/form-data">
                        <div class="form-group">
                            <label for="content"><i class="fas fa-align-left"></i> 帖子内容</label>
                            <textarea id="content" v-model="content" class="form-control" rows="6" placeholder="请输入帖子内容（支持文字、图片、视频）"></textarea>
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-image"></i> 上传图片</label>
                            <input type="file" accept="image/*" multiple @change="handleImageChange">
                            <div class="preview-list">
                                <img v-for="(img, idx) in imagePreviews" :src="img" :key="idx" class="preview-img">
                            </div>
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-video"></i> 上传视频</label>
                            <input type="file" accept="video/*" multiple @change="handleVideoChange">
                            <div class="preview-list">
                                <video v-for="(vid, idx) in videoPreviews" :src="vid" :key="idx" class="preview-video" controls width="200"></video>
                            </div>
                        </div>
                        <div class="form-actions" style="text-align:right;">
                            <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane"></i> 发布</button>
                            <a href="/forum" class="btn btn-secondary" style="margin-left:10px;"><i class="fas fa-arrow-left"></i> 返回</a>
                        </div>
                        <div v-if="message" class="alert" :class="messageType" style="margin-top:10px;">{{ message }}</div>
                    </form>
                </div>
            </div>
        </div>
    </main>
    <script src="/js/post-create.js"></script>
    <style>
        .centered-container { display: flex; justify-content: center; align-items: flex-start; min-height: 80vh; }
        .card { box-shadow: 0 2px 8px rgba(0,0,0,0.06); border-radius: 8px; background: #fff; }
        .card-header { border-bottom: 1px solid #f0f0f0; padding: 20px 24px 10px 24px; }
        .card-body { padding: 24px; }
        .form-group { margin-bottom: 18px; }
        .form-group label { font-weight: 500; margin-bottom: 6px; display: block; }
        .form-control { width: 100%; padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 15px; }
        .form-actions { margin-top: 18px; }
        .preview-list { display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
        .preview-img { width: 90px; height: 90px; object-fit: cover; border-radius: 4px; border: 1px solid #eee; }
        .preview-video { border-radius: 4px; border: 1px solid #eee; }
        .btn { display: inline-flex; align-items: center; gap: 6px; }
    </style>
</body>
</html> 